<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Connect Wallet â€“ PixelPup</title>
  <script>
  (async () => {
    try {
      const r = await fetch('/api/csrf', { credentials: 'include' });
      const j = await r.json();
      window.csrfToken = j.csrfToken;
    } catch {}
  })();
  </script>
  <style>
    :root{
      --bg:#0b0f19; --panel:#111827; --text:#00ffc6; --text-dim:#7fffe6;
      --accent:#ffcc00; --accent-2:#ff3df7; --accent-3:#6ae3ff;
      --card-bg:#222638; --card-border:#3af5d9; --danger:#ff5577; --ok:#45ff99;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(1200px 800px at 50% -20%, #13203b 0%, #0b0f19 60%, #05070d 100%),
        linear-gradient(180deg, #0b0f19 0%, #05070d 100%);
      color:var(--text); padding:24px;
    }
    a{color:var(--accent-3); text-decoration:none}
    header{display:flex; align-items:center; justify-content:space-between; gap:16px; margin:0 auto 16px; max-width:1100px}
    nav{display:flex; gap:10px; flex-wrap:wrap}
    .brand{display:flex; align-items:center; gap:10px; letter-spacing:.5px; text-shadow:0 0 10px rgba(0,255,198,.6)}
    .brand-badge{width:36px;height:36px;border-radius:10px;border:2px solid var(--card-border);
      box-shadow:0 0 14px rgba(0,255,198,.2); display:grid; place-items:center;
      background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02)); font-weight:700; color:var(--accent)}
    .btn{appearance:none; border:0; cursor:pointer; padding:10px 14px; border-radius:12px; color:#000; background:var(--accent);
      box-shadow:0 3px 0 #b59000, 0 0 12px rgba(255,204,0,.35); font-weight:700; letter-spacing:.2px;
      display:inline-flex; align-items:center; gap:8px; font-size:12px}
    .btn-primary{background:var(--accent-2); color:#120016; box-shadow:0 3px 0 #a2259c, 0 0 14px rgba(255,61,247,.35)}
    .btn-ghost{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02)); color:var(--text);
      border:1px solid rgba(58,245,217,.35); box-shadow:0 0 12px rgba(0,255,198,.18) inset,0 0 12px rgba(0,255,198,.12)}
    .wrap{max-width:600px; margin:0 auto}
    .panel{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.01));
      border:1px solid rgba(58,245,217,.3); border-radius:16px; padding:24px; backdrop-filter:blur(4px);
      box-shadow:0 0 24px rgba(0,255,198,.06) inset, 0 0 24px rgba(0,255,198,.08)}
    .controls{ display:grid; gap:16px; margin-bottom:20px; }
    label{ display:block; margin-bottom:6px; color:var(--text-dim); font-size:14px; }
    input, select, textarea {
      width:100%; padding:12px; border-radius:8px; border:1px solid rgba(58,245,217,.3);
      background:#0f1425; color:var(--text); font-family:inherit;
    }
    input:focus, textarea:focus { outline:none; border-color:var(--accent); }
    .readout { color:var(--text-dim); font-size:14px; line-height:1.5; margin-bottom:20px; }
    small { display:block; margin-top:4px; color:var(--danger); }
    [hidden] { display: none !important; }
  </style>
</head>
<body>
  <header>
    <div class="brand"><div class="brand-badge">KK</div><h1>Connect Wallet</h1></div>
    <nav>
      <a class="btn btn-ghost" href="/play.html">Poker</a>
      <a class="btn btn-ghost" href="/blackjack.html">Blackjack</a>
    </nav>
  </header>

  <main class="wrap panel">
    <p class="readout">
      Create a new wallet or import an existing seed phrase. 
      Your keys are encrypted locally in your browser and never sent to our server.
    </p>

    <div class="controls">
      <div>
        <label>Network</label>
        <select id="net">
          <option value="mainnet">Mainnet</option>
        </select>
      </div>
      <div>
        <label>Set Password (min 8 chars)</label>
        <input id="pass" type="password" minlength="8" placeholder="Enter a strong password" required />
      </div>
      <div>
        <label>Confirm Password</label>
        <input id="pass2" type="password" minlength="8" placeholder="Repeat password" required />
        <small id="passHint" hidden>Passwords must match and be 8+ chars</small>
      </div>
    </div>

    <div class="controls" style="grid-template-columns: 1fr 1fr; display: grid; gap: 10px;">
      <button id="btnCreate" class="btn btn-primary" disabled>Create New Wallet</button>
      <button id="btnImport" class="btn btn-ghost" disabled>Import Seed</button>
    </div>

    <div id="importArea" class="panel" style="margin-top:20px;" hidden>
      <label>Seed Phrase (12 words)</label>
      <textarea id="seedIn" rows="3" placeholder="word1 word2 word3 ..."></textarea>
      <button id="btnDoImport" class="btn btn-primary" style="margin-top:10px; width:100%;">Load Wallet</button>
    </div>

    <div id="linked" class="panel" style="margin-top:20px; border-color:var(--ok);" hidden>
      <h3 style="margin-top:0; color:var(--ok);">Wallet Ready</h3>
      <p id="addr" class="readout" style="word-break:break-all; font-family:monospace;"></p>
      <p id="kiblBalance" class="readout"></p>
      <button id="btnLink" class="btn btn-primary" style="width:100%;">Link to this Browser Session</button>
    </div>
  </main>

  <script type="module" src="/assets/connect.bundle.js"></script>
</body>
</html>